{"queries":[{"id":"pr_act_cats","compiledQueryString":"select\n      *, level::int::text as level_str\n  from eind.${inputs.label_type.value} pr\n  where ${inputs.include_bots.value} or author_type != 'Bot'","inputQueryString":"select\n      *, level::int::text as level_str\n  from eind.${inputs.label_type.value} pr\n  where ${inputs.include_bots.value} or author_type != 'Bot'","compiled":false,"inline":true},{"id":"pr_dims","compiledQueryString":"select owner, repository, current_state, level_str from (select\n      *, level::int::text as level_str\n  from eind.${inputs.label_type.value} pr\n  where ${inputs.include_bots.value} or author_type != 'Bot')","inputQueryString":"select owner, repository, current_state, level_str from ${pr_act_cats}","compiled":true,"inline":true},{"id":"selected_prs","compiledQueryString":"select * from ((select\n      *, level::int::text as level_str\n  from eind.${inputs.label_type.value} pr\n  where ${inputs.include_bots.value} or author_type != 'Bot')) pr_act_cats\nwhere ${inputs.pr_dimensions}","inputQueryString":"select * from (${pr_act_cats}) pr_act_cats\nwhere ${inputs.pr_dimensions}","compiled":true,"inline":true},{"id":"top_labels","compiledQueryString":"select\n    pl.label,\nfrom (select * from ((select\n      *, level::int::text as level_str\n  from eind.${inputs.label_type.value} pr\n  where ${inputs.include_bots.value} or author_type != 'Bot')) pr_act_cats\nwhere ${inputs.pr_dimensions}) pr\nleft join eind.pr_labels pl on pr.pr_id= pl.pr_id\nwhere pr.label is not null\ngroup by pl.label\norder by count(*) desc\nlimit 20","inputQueryString":"select\n    pl.label,\nfrom ${selected_prs} pr\nleft join eind.pr_labels pl on pr.pr_id= pl.pr_id\nwhere pr.label is not null\ngroup by pl.label\norder by count(*) desc\nlimit 20","compiled":true,"inline":true},{"id":"label_heat","compiledQueryString":"select \n    a.label as yval,\n    b.label as xval,\n    count(*) as count\n    from (select * from ((select\n      *, level::int::text as level_str\n  from eind.${inputs.label_type.value} pr\n  where ${inputs.include_bots.value} or author_type != 'Bot')) pr_act_cats\nwhere ${inputs.pr_dimensions}) a\n    left join eind.pr_labels b on a.pr_id = b.pr_id\n    where b.label in ((select\n    pl.label,\nfrom (select * from ((select\n      *, level::int::text as level_str\n  from eind.${inputs.label_type.value} pr\n  where ${inputs.include_bots.value} or author_type != 'Bot')) pr_act_cats\nwhere ${inputs.pr_dimensions}) pr\nleft join eind.pr_labels pl on pr.pr_id= pl.pr_id\nwhere pr.label is not null\ngroup by pl.label\norder by count(*) desc\nlimit 20))\ngroup by a.label, b.label\norder by count desc","inputQueryString":"select \n    a.label as yval,\n    b.label as xval,\n    count(*) as count\n    from ${selected_prs} a\n    left join eind.pr_labels b on a.pr_id = b.pr_id\n    where b.label in (${top_labels})\ngroup by a.label, b.label\norder by count desc","compiled":true,"inline":true},{"id":"label_heat_no_unknown_max","compiledQueryString":"select\n    max(count) as max_count\nfrom (select \n    a.label as yval,\n    b.label as xval,\n    count(*) as count\n    from (select * from ((select\n      *, level::int::text as level_str\n  from eind.${inputs.label_type.value} pr\n  where ${inputs.include_bots.value} or author_type != 'Bot')) pr_act_cats\nwhere ${inputs.pr_dimensions}) a\n    left join eind.pr_labels b on a.pr_id = b.pr_id\n    where b.label in ((select\n    pl.label,\nfrom (select * from ((select\n      *, level::int::text as level_str\n  from eind.${inputs.label_type.value} pr\n  where ${inputs.include_bots.value} or author_type != 'Bot')) pr_act_cats\nwhere ${inputs.pr_dimensions}) pr\nleft join eind.pr_labels pl on pr.pr_id= pl.pr_id\nwhere pr.label is not null\ngroup by pl.label\norder by count(*) desc\nlimit 20))\ngroup by a.label, b.label\norder by count desc)\nwhere yval != '[Unknown]'","inputQueryString":"select\n    max(count) as max_count\nfrom ${label_heat}\nwhere yval != '[Unknown]'","compiled":true,"inline":true},{"id":"pr_activity_hist","compiledQueryString":"select \n    date_val, \n    ${(inputs.pr_agg_condition.value === 'closed_at') ? 'current_state, ' : ''}\n    count(1) count from (\n    select\n        date_trunc('${inputs.date_grouping.value}', ${inputs.pr_agg_condition.value}) as date_val,\n        current_state\n    from ((select * from ((select\n      *, level::int::text as level_str\n  from eind.${inputs.label_type.value} pr\n  where ${inputs.include_bots.value} or author_type != 'Bot')) pr_act_cats\nwhere ${inputs.pr_dimensions})) pr\n    where ${inputs.pr_agg_condition.value} is not null\n    and ${inputs.pr_agg_condition.value} between '${inputs.date_range_from_query.start}' and '${inputs.date_range_from_query.end}'\n) x\ngroup by date_val ${(inputs.pr_agg_condition.value === 'closed_at') ? ', current_state' : ''}\norder by date_val","inputQueryString":"select \n    date_val, \n    ${(inputs.pr_agg_condition.value === 'closed_at') ? 'current_state, ' : ''}\n    count(1) count from (\n    select\n        date_trunc('${inputs.date_grouping.value}', ${inputs.pr_agg_condition.value}) as date_val,\n        current_state\n    from (${selected_prs}) pr\n    where ${inputs.pr_agg_condition.value} is not null\n    and ${inputs.pr_agg_condition.value} between '${inputs.date_range_from_query.start}' and '${inputs.date_range_from_query.end}'\n) x\ngroup by date_val ${(inputs.pr_agg_condition.value === 'closed_at') ? ', current_state' : ''}\norder by date_val","compiled":true,"inline":true},{"id":"cognitive_load_data","compiledQueryString":"with levels as (\n    select * from (values \n        (0, 'Just Title'),\n        (1, '+ Body'),\n        (2, '+ Comments'),\n        (3, '+ Code'),\n        (99, 'Incomplete')\n    ) as t(level, label)\n)\nselect\n    levels.level,\n    levels.label,\n    count(*) as count\nfrom levels\nleft join (select * from ((select\n      *, level::int::text as level_str\n  from eind.${inputs.label_type.value} pr\n  where ${inputs.include_bots.value} or author_type != 'Bot')) pr_act_cats\nwhere ${inputs.pr_dimensions}) pr on pr.level = levels.level\ngroup by levels.level, levels.label\norder by levels.level","inputQueryString":"with levels as (\n    select * from (values \n        (0, 'Just Title'),\n        (1, '+ Body'),\n        (2, '+ Comments'),\n        (3, '+ Code'),\n        (99, 'Incomplete')\n    ) as t(level, label)\n)\nselect\n    levels.level,\n    levels.label,\n    count(*) as count\nfrom levels\nleft join ${selected_prs} pr on pr.level = levels.level\ngroup by levels.level, levels.label\norder by levels.level","compiled":true,"inline":true},{"id":"cognitive_load_sankey","compiledQueryString":"select 'prs' source, 'l1' as target, 'Not Clear' as tname, count(1) as value from (select * from ((select\n      *, level::int::text as level_str\n  from eind.${inputs.label_type.value} pr\n  where ${inputs.include_bots.value} or author_type != 'Bot')) pr_act_cats\nwhere ${inputs.pr_dimensions})\n  where label = '[Unknown]' or level > 0\nunion all\nselect 'prs' source, 'title' as target, 'Clear from Title' as tname, count(1) as value from (select * from ((select\n      *, level::int::text as level_str\n  from eind.${inputs.label_type.value} pr\n  where ${inputs.include_bots.value} or author_type != 'Bot')) pr_act_cats\nwhere ${inputs.pr_dimensions})\n  where label != '[Unknown]' and level = 0\nunion all\nselect 'l1' source, 'l2' as target, 'Not Clear' as tname, count(1) as value from (select * from ((select\n      *, level::int::text as level_str\n  from eind.${inputs.label_type.value} pr\n  where ${inputs.include_bots.value} or author_type != 'Bot')) pr_act_cats\nwhere ${inputs.pr_dimensions})\n  where label = '[Unknown]' or level > 1\nunion all\nselect 'l1' source, 'body' as target, 'Clear from +Body' as tname, count(1) as value from (select * from ((select\n      *, level::int::text as level_str\n  from eind.${inputs.label_type.value} pr\n  where ${inputs.include_bots.value} or author_type != 'Bot')) pr_act_cats\nwhere ${inputs.pr_dimensions})\n  where label != '[Unknown]' and level = 1\nunion all\nselect 'l2' source, 'l3' as target, 'Not Clear' as tname, count(1) as value from (select * from ((select\n      *, level::int::text as level_str\n  from eind.${inputs.label_type.value} pr\n  where ${inputs.include_bots.value} or author_type != 'Bot')) pr_act_cats\nwhere ${inputs.pr_dimensions})\n  where label = '[Unknown]' or level > 2\nunion all\nselect 'l2' source, 'comments' as target, 'Clear from +Comments' as tname, count(1) as value from (select * from ((select\n      *, level::int::text as level_str\n  from eind.${inputs.label_type.value} pr\n  where ${inputs.include_bots.value} or author_type != 'Bot')) pr_act_cats\nwhere ${inputs.pr_dimensions})\n  where label != '[Unknown]' and level = 2\nunion all\nselect 'l3' source, 'Unclear' as target, '' as tname, count(1) as value from (select * from ((select\n      *, level::int::text as level_str\n  from eind.${inputs.label_type.value} pr\n  where ${inputs.include_bots.value} or author_type != 'Bot')) pr_act_cats\nwhere ${inputs.pr_dimensions})\n  where label = '[Unknown]'\nunion all\nselect 'l3' source, 'code' as target, 'Clear from +Code' as tname, count(1) as value from (select * from ((select\n      *, level::int::text as level_str\n  from eind.${inputs.label_type.value} pr\n  where ${inputs.include_bots.value} or author_type != 'Bot')) pr_act_cats\nwhere ${inputs.pr_dimensions})\n  where level = 3","inputQueryString":"select 'prs' source, 'l1' as target, 'Not Clear' as tname, count(1) as value from ${selected_prs}\n  where label = '[Unknown]' or level > 0\nunion all\nselect 'prs' source, 'title' as target, 'Clear from Title' as tname, count(1) as value from ${selected_prs}\n  where label != '[Unknown]' and level = 0\nunion all\nselect 'l1' source, 'l2' as target, 'Not Clear' as tname, count(1) as value from ${selected_prs}\n  where label = '[Unknown]' or level > 1\nunion all\nselect 'l1' source, 'body' as target, 'Clear from +Body' as tname, count(1) as value from ${selected_prs}\n  where label != '[Unknown]' and level = 1\nunion all\nselect 'l2' source, 'l3' as target, 'Not Clear' as tname, count(1) as value from ${selected_prs}\n  where label = '[Unknown]' or level > 2\nunion all\nselect 'l2' source, 'comments' as target, 'Clear from +Comments' as tname, count(1) as value from ${selected_prs}\n  where label != '[Unknown]' and level = 2\nunion all\nselect 'l3' source, 'Unclear' as target, '' as tname, count(1) as value from ${selected_prs}\n  where label = '[Unknown]'\nunion all\nselect 'l3' source, 'code' as target, 'Clear from +Code' as tname, count(1) as value from ${selected_prs}\n  where level = 3","compiled":true,"inline":true},{"id":"cognitive_grid_data","compiledQueryString":"with levels as (\n    select * from (values \n        (0, 'Just Title'),\n        (1, '+ Body'),\n        (2, '+ Comments'),\n        (3, '+ Code'),\n        (99, 'Incomplete')\n    ) as t(level, label)\n),\nfiltered as (\n    select * from (select * from ((select\n      *, level::int::text as level_str\n  from eind.${inputs.label_type.value} pr\n  where ${inputs.include_bots.value} or author_type != 'Bot')) pr_act_cats\nwhere ${inputs.pr_dimensions}) pr\n),\ngrouped as (\n    select\n        levels.level,\n        levels.label,\n        count(*) as count,\n        filtered.${inputs.cg_dim.value} as \"group\"\n    from levels\n    left join filtered on filtered.level = levels.level\n    group by levels.level, levels.label, filtered.${inputs.cg_dim.value}\n),\ntotals as (\n    select\n        *,\n        sum(count) over (partition by \"group\") as group_total\n    from grouped\n)\nselect *\nfrom totals\norder by group_total desc, level","inputQueryString":"with levels as (\n    select * from (values \n        (0, 'Just Title'),\n        (1, '+ Body'),\n        (2, '+ Comments'),\n        (3, '+ Code'),\n        (99, 'Incomplete')\n    ) as t(level, label)\n),\nfiltered as (\n    select * from ${selected_prs} pr\n),\ngrouped as (\n    select\n        levels.level,\n        levels.label,\n        count(*) as count,\n        filtered.${inputs.cg_dim.value} as \"group\"\n    from levels\n    left join filtered on filtered.level = levels.level\n    group by levels.level, levels.label, filtered.${inputs.cg_dim.value}\n),\ntotals as (\n    select\n        *,\n        sum(count) over (partition by \"group\") as group_total\n    from grouped\n)\nselect *\nfrom totals\norder by group_total desc, level","compiled":true,"inline":true},{"id":"pr_cognitive_hist","compiledQueryString":"with levels as (\n    select * from (values \n        (0, 'Just Title'),\n        (1, '+ Body'),\n        (2, '+ Comments'),\n        (3, '+ Code'),\n        (99, 'Incomplete')\n    ) as t(level, label)\n)\nselect\n    levels.level,\n    levels.label,\n    date_trunc('${inputs.date_grouping.value}', pr.created_at) as date_val,\n    count(*) as count\nfrom levels\nleft join (select * from ((select\n      *, level::int::text as level_str\n  from eind.${inputs.label_type.value} pr\n  where ${inputs.include_bots.value} or author_type != 'Bot')) pr_act_cats\nwhere ${inputs.pr_dimensions}) pr on pr.level = levels.level\ngroup by levels.level, levels.label, date_val\norder by date_val, levels.level","inputQueryString":"with levels as (\n    select * from (values \n        (0, 'Just Title'),\n        (1, '+ Body'),\n        (2, '+ Comments'),\n        (3, '+ Code'),\n        (99, 'Incomplete')\n    ) as t(level, label)\n)\nselect\n    levels.level,\n    levels.label,\n    date_trunc('${inputs.date_grouping.value}', pr.created_at) as date_val,\n    count(*) as count\nfrom levels\nleft join ${selected_prs} pr on pr.level = levels.level\ngroup by levels.level, levels.label, date_val\norder by date_val, levels.level","compiled":true,"inline":true}]}